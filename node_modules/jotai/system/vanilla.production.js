System.register([],function(z){"use strict";return{execute:function(){z("atom",N);let L=0;function N(s,l){const h=`atom${++L}`,u={toString:()=>h};return typeof s=="function"?u.read=s:(u.init=s,u.read=E=>E(u),u.write=(E,A,w)=>A(u,typeof w=="function"?w(E(u)):w)),l&&(u.write=l),u}const C=s=>"init"in s,q=s=>!!s.write,y=new WeakMap,R=(s,l)=>{y.set(s,l),s.catch(()=>{}).finally(()=>y.delete(s))},B=(s,l)=>{const h=y.get(s);h&&(y.delete(s),h(l))},F=(s,l)=>{s.status="fulfilled",s.value=l},G=(s,l)=>{s.status="rejected",s.reason=l},T=s=>typeof(s==null?void 0:s.then)=="function",M=(s,l)=>"v"in s&&"v"in l&&Object.is(s.v,l.v),H=(s,l)=>"e"in s&&"e"in l&&Object.is(s.e,l.e),p=s=>"v"in s&&s.v instanceof Promise,U=(s,l)=>"v"in s&&"v"in l&&s.v.orig&&s.v.orig===l.v.orig,S=s=>{if("e"in s)throw s.e;return s.v},V=z("createStore",()=>{const s=new WeakMap,l=new WeakMap,h=new Map,u=t=>s.get(t),E=(t,n)=>{const r=s.get(t);if(s.set(t,n),h.has(t)||h.set(t,r),r&&p(r)){const e="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);r.v!==e&&B(r.v,e)}},A=(t,n,r)=>{const e=new Map;let c=!1;r.forEach((i,o)=>{!i&&o===t&&(i=n),i&&(e.set(o,i),n.d.get(o)!==i&&(c=!0))}),(c||n.d.size!==e.size)&&(n.d=e)},w=(t,n,r)=>{const e=u(t),c={d:(e==null?void 0:e.d)||new Map,v:n};if(r&&A(t,c,r),e&&M(e,c)&&e.d===c.d)return e;if(e&&p(e)&&p(c)&&U(e,c)){if(e.d===c.d)return e;c.v=e.v}return E(t,c),c},I=(t,n,r,e)=>{if(T(n)){let c;const i=new Promise((o,d)=>{let v=!1;n.then(f=>{if(!v){v=!0;const a=u(t),g=w(t,i,r);F(i,f),o(f),l.has(t)&&(a==null?void 0:a.d)!==g.d&&D(t,g,a==null?void 0:a.d)}},f=>{if(!v){v=!0;const a=u(t),g=w(t,i,r);G(i,f),d(f),l.has(t)&&(a==null?void 0:a.d)!==g.d&&D(t,g,a==null?void 0:a.d)}}),c=f=>{v||(v=!0,f.then(a=>F(i,a),a=>G(i,a)),o(f))}});return i.orig=n,i.status="pending",R(i,o=>{o&&c(o),e==null||e()}),w(t,i,r)}return w(t,n,r)},_=(t,n,r)=>{const e=u(t),c={d:(e==null?void 0:e.d)||new Map,e:n};return r&&A(t,c,r),e&&H(e,c)&&e.d===c.d?e:(E(t,c),c)},m=(t,n)=>{const r=u(t);if(!n&&r&&(l.has(t)||Array.from(r.d).every(([f,a])=>f===t||m(f)===a)))return r;const e=new Map;let c=!0;const i=f=>{if(f===t){const g=u(f);if(g)return e.set(f,g),S(g);if(C(f))return e.set(f,void 0),f.init;throw new Error("no atom init")}const a=m(f);return e.set(f,a),S(a)};let o,d;const v={get signal(){return o||(o=new AbortController),o.signal},get setSelf(){return!d&&q(t)&&(d=(...f)=>{if(!c)return P(t,...f)}),d}};try{const f=t.read(i,v);return I(t,f,e,()=>o==null?void 0:o.abort())}catch(f){return _(t,f,e)}finally{c=!1}},$=t=>S(m(t)),x=t=>{let n=l.get(t);return n||(n=j(t)),n},k=(t,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(t)),K=t=>{const n=l.get(t);n&&k(t,n)&&W(t)},Q=t=>{const n=new Map,r=new WeakMap,e=o=>{var d;const v=new Set((d=l.get(o))==null?void 0:d.t);return h.forEach((f,a)=>{var g;(g=u(a))!=null&&g.d.has(o)&&v.add(a)}),v},c=o=>{e(o).forEach(d=>{d!==o&&(n.set(d,(n.get(d)||new Set).add(o)),r.set(d,(r.get(d)||0)+1),c(d))})};c(t);const i=o=>{e(o).forEach(d=>{var v;if(d!==o){let f=r.get(d);if(f&&r.set(d,--f),!f){let a=!!((v=n.get(d))!=null&&v.size);if(a){const g=u(d),X=m(d,!0);a=!g||!M(g,X)}a||n.forEach(g=>g.delete(d))}i(d)}})};i(t)},J=(t,...n)=>{let r=!0;const e=o=>S(m(o)),c=(o,...d)=>{let v;if(o===t){if(!C(o))throw new Error("atom not writable");const f=u(o),a=I(o,d[0]);(!f||!M(f,a))&&Q(o)}else v=J(o,...d);return r||O(),v},i=t.write(e,c,...n);return r=!1,i},P=(t,...n)=>{const r=J(t,...n);return O(),r},j=(t,n,r)=>{var e;const c=r||[];(e=u(t))==null||e.d.forEach((o,d)=>{const v=l.get(d);v?v.t.add(t):d!==t&&j(d,t,c)}),m(t);const i={t:new Set(n&&[n]),l:new Set};if(l.set(t,i),q(t)&&t.onMount){const{onMount:o}=t;c.push(()=>{const d=o((...v)=>P(t,...v));d&&(i.u=d)})}return r||c.forEach(o=>o()),i},W=t=>{var n;const r=(n=l.get(t))==null?void 0:n.u;r&&r(),l.delete(t);const e=u(t);e&&(p(e)&&B(e.v),e.d.forEach((c,i)=>{if(i!==t){const o=l.get(i);o&&(o.t.delete(t),k(i,o)&&W(i))}}))},D=(t,n,r)=>{const e=new Set(n.d.keys());r==null||r.forEach((c,i)=>{if(e.has(i)){e.delete(i);return}const o=l.get(i);o&&(o.t.delete(t),k(i,o)&&W(i))}),e.forEach(c=>{const i=l.get(c);i?i.t.add(t):l.has(t)&&j(c,t)})},O=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([n,r])=>{const e=u(n);if(e){const c=l.get(n);c&&e.d!==(r==null?void 0:r.d)&&D(n,e,r==null?void 0:r.d),c&&!(r&&!p(r)&&(M(r,e)||H(r,e)))&&c.l.forEach(i=>i())}})}};return{get:$,set:P,sub:(t,n)=>{const r=x(t);O();const e=r.l;return e.add(n),()=>{e.delete(n),K(t)}}}});let b;const Y=z("getDefaultStore",()=>(b||(b=V()),b))}}});
